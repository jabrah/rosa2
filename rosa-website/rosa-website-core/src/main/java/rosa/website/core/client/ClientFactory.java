package rosa.website.core.client;

import com.google.gwt.place.shared.PlaceController;
import com.google.web.bindery.event.shared.EventBus;
import com.google.web.bindery.event.shared.SimpleEventBus;
import rosa.website.core.client.view.BookDescriptionView;
import rosa.website.core.client.view.BookSelectView;
import rosa.website.core.client.view.CSVDataView;
import rosa.website.core.client.view.HTMLView;
import rosa.website.core.client.view.impl.BookDescriptionViewImpl;
import rosa.website.core.client.view.impl.BookSelectViewImpl;
import rosa.website.core.client.view.impl.CSVDataViewImpl;
import rosa.website.core.client.view.impl.HTMLViewImpl;

import java.util.logging.Logger;

public class ClientFactory {
    private static final Logger logger = Logger.getLogger(ClientFactory.class.toString());
    
    private static EventBus event_bus = new SimpleEventBus();
    private static PlaceController place_controller = new PlaceController(event_bus);
//    private final ArchiveDataServiceAsync archiveDataService = GWT.create(ArchiveDataService.class);
    private static ArchiveDataServiceAsync archiveDataService = CachingArchiveDataService.INSTANCE;

    private static HTMLView htmlView;
    private static CSVDataView csvDataView;
    private static BookSelectView bookSelectView;
    private static BookDescriptionView bookDescriptionView;

    public EventBus eventBus() {
        return event_bus;
    }

    public PlaceController placeController() {
        return place_controller;
    }

    public ArchiveDataServiceAsync archiveDataService() {
        return archiveDataService;
    }

    public HTMLView htmlView() {
        if (htmlView == null) {
            htmlView = new HTMLViewImpl();
        }
        return htmlView;
    }

    public CSVDataView csvDataView() {
        if (csvDataView == null) {
            csvDataView = new CSVDataViewImpl();
        }
        return csvDataView;
    }

    public BookSelectView bookSelectView() {
        if (bookSelectView == null) {
            bookSelectView = new BookSelectViewImpl();
        }
        return bookSelectView;
    }

    public BookDescriptionView bookDescriptionView() {
        if (bookDescriptionView == null) {
            logger.info("Creating new book description view.");
            bookDescriptionView = new BookDescriptionViewImpl();
            logger.info("New book description view made.");
        }
        return bookDescriptionView;
    }
}
